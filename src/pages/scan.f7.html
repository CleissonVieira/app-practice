<template>
  <div data-name="scan">
    <div class="block card no-margin no-padding">
      <div class="row">

        <div class="col-100 tablet-50" style="background-color: #969ea7; height: 360px;">

          <div id="reader" width="600px"></div>

          <div class="fab fab-right-bottom color-white" style="margin-bottom: 170px;">
            <a href="#">
              <i class="icon material-icons md-only color-black">archive</i>
            </a>
          </div>

        </div>

        <div class="col-100 tablet-50 margin-horizontal">
          <hr />
          <div class="row no-gutter">
            <div class="col-45"><img style="width: 140px; height: 140px;" src="static/images/qrCode.png"></div>
            <div class="col-55" style="margin-top: 8px; font-size: medium;">
              <div class="row item-title-row">
                <div class="col-100 tablet-50"><strong>Fulano da Silva</strong></div>
                <div class="col-100 tablet-50">fulano.silva</div>
                <div class="col-100 tablet-50 margin-top">Leia o QR para ser direcionado a p√°gina.</div>
              </div>
            </div>
          </div>
          <hr />
        </div>

      </div>
    </div>
  </div>
</template>


<!-- <script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
<script src="../js/html5-qrcode.min.js"></script>
<script src="html5-qrcode.min.js"></script> -->

<script>
  // import Html5QrcodeScanner from "../js/html5-qrcode.min.js"
  import Html5QrcodeScanner from "html5-qr-code.min.js"
  export default {
    methods: {

      onScanSuccess: function(qrMessage) {
        console.log(`QR matched = ${qrMessage}`);
      },
      onScanFailure: function(error) {
        console.warn(`QR error = ${error}`);
      }

    },
    on: {
      tabInit: function(e, page) {
        console.log("teste")

        let html5QrcodeScanner = new Html5QrcodeScanner(
          "reader", { fps: 10, qrbox: 250 }, /* verbose= */ true);
        html5QrcodeScanner.render(this.onScanSuccess(), this.onScanFailure());

        console.log("teste2")
      },
    }
  };
</script>
